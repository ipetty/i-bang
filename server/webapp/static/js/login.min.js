$.namespace("Ibang.login"),Ibang.login={init:function(){this.initEvent()},initEvent:function(){$("#loginBtn").bind("click",function(){var n="/admin/web/login";if(Ibang.Base.throttle.isLock(n))return!1;Ibang.Base.throttle.lock(n),Ibang.login.hideLoginMsg();var e=Ibang.login.checkData();return 0==e?(Ibang.Base.throttle.unLock(n),!1):($("#loginBtn").addClass("disabled"),$.ajax({type:"post",url:Ibang.Config.appUrl+n,data:e,dataType:"json",success:function(e){e.success?location.href=Ibang.Config.appUrl+"/admin/verify":Ibang.login.showLoginMsg(e.description),$("#loginBtn").removeClass("disabled"),Ibang.Base.throttle.unLock(n)},error:function(){$("#loginBtn").removeClass("disabled"),Ibang.login.showLoginMsg("登录异常"),Ibang.Base.throttle.unLock(n)}}),void 0)}),$("#username").keydown(function(n){return $(this).hasClass("selected")||$(this).addClass("selected"),13==n.keyCode?($("#loginBtn").click(),!1):void 0}).blur(function(){$(this).removeClass("selected")}),$("#password").keydown(function(n){return $(this).hasClass("selected")||$(this).addClass("selected"),13==n.keyCode?($("#loginBtn").click(),!1):void 0}).blur(function(){$(this).removeClass("selected")})},checkData:function(){var n={username:$.trim($("#username").val()),password:$.trim($("#password").val())};return""==n.username?(Ibang.login.showLoginMsg("请输入用户名"),$("#username").focus(),!1):""==n.password?(Ibang.login.showLoginMsg("请输入密码"),$("#password").focus(),!1):n},showLoginMsg:function(n){$(".msg",".item-msg").text(n),$(".item-msg","#main").show()},hideLoginMsg:function(){$(".item-msg","#main").hide(),$(".msg",".item-msg").text("")}};